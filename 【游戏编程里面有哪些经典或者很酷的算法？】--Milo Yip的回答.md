## 游戏编程里面有哪些经典或者很酷的算法？

作者: [Milo Yip](http://www.zhihu.com/people/miloyip)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 赞同: 539


我挑一些有趣的算法，希望尽量提及相关算法在游戏中的应用。<br><br><b>光栅化</b><br><ul><li><a href="http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm" class=" wrap external" target="_blank" rel="nofollow noreferrer">Bresenham's line algorithm<i class="icon-external"></i></a> [1]：经典的绘画直线算法，后来还可以稍作修改用于绘画圆弧[2]，都不用三角函数或除数，只需用整数加法、减法和乘法。 </li></ul><img src="http://pic1.zhimg.com/b7cb85217babb238ac85327b2911226c_b.jpg" data-rawwidth="592" data-rawheight="401" class="origin_image zh-lightbox-thumb" width="592" data-original="http://pic1.zhimg.com/b7cb85217babb238ac85327b2911226c_r.jpg"><br><ul><li>Perspective-Correct Texture Mapping [3]：透视正确的光栅化纹理贴图算法是1980才出现的。第一代Quake引擎引入后，才开始支持不垂直的墙、不水平的地面天花。</li></ul><img src="http://pic4.zhimg.com/2900a906e05524681fdb28cfc1e4342f_b.jpg" data-rawwidth="1000" data-rawheight="352" class="origin_image zh-lightbox-thumb" width="1000" data-original="http://pic4.zhimg.com/2900a906e05524681fdb28cfc1e4342f_r.jpg">（图片来自维基百科）<br><br><ul><li>Polygon Rasterization with Edge Function [4]：Bresenham算法如果用来画多边形，两个多边形的共边会被重绘。后来发明了使用简单的edge function去解决这个问题，而且适合并行的硬件实现。现在的GPU都是使用这个算法。</li></ul><img src="http://pic4.zhimg.com/bc6a762cbb0493847695f4968d0914eb_b.jpg" data-rawwidth="492" data-rawheight="368" class="origin_image zh-lightbox-thumb" width="492" data-original="http://pic4.zhimg.com/bc6a762cbb0493847695f4968d0914eb_r.jpg"><br><br><b>全局光照</b><br><ul><li>Precomputed Radiance Transfer (PRT) with Spherical Harmonics（SH）[5]：储存静态环境对于各个方向光源的漫反射数据，可以实现动态低频光源的全局光照效果。这种表示方式非常神奇。Halo 3也使用到这种技术[6]。</li></ul><img src="http://pic4.zhimg.com/4225d10efdd85cb81c6ef6fe855b14a3_b.jpg" data-rawwidth="694" data-rawheight="295" class="origin_image zh-lightbox-thumb" width="694" data-original="http://pic4.zhimg.com/4225d10efdd85cb81c6ef6fe855b14a3_r.jpg"><br><ul><li>Screen-space Ambient Occlusion （SSAO）[7]：Crytek提出的首个屏幕空间环境光遮蔽算法，之后引来大量的研究及改进算法。也有用类似的概念去做近距离的反射，如SSDO[8]。</li></ul><img src="http://pic4.zhimg.com/1fa9899eb72b563a1a94f23aa9b4b1eb_b.jpg" data-rawwidth="798" data-rawheight="316" class="origin_image zh-lightbox-thumb" width="798" data-original="http://pic4.zhimg.com/1fa9899eb72b563a1a94f23aa9b4b1eb_r.jpg"><br><ul><li>Light Propagation Volume （LPV）[9]：Crytek提出的首个动态全局光照算法，不需要预计算。但要在体积数据中计算传播，性能较慢，所以之后再优化成 Cascaded LPV [10]。<br></li></ul><img src="http://pic3.zhimg.com/3858e524cda20e301ccbaa6d3b823b22_b.jpg" data-rawwidth="1198" data-rawheight="377" class="origin_image zh-lightbox-thumb" width="1198" data-original="http://pic3.zhimg.com/3858e524cda20e301ccbaa6d3b823b22_r.jpg"><br><ul><li>Voxel Cone Tracing [11]：也是不需要预计算的动态全局光照算法。把场景动态生成层阶式的体素数据（像mipmap那样的pre-filtering），从光源视角计算直接光照，然后逐像素追踪这组数据获取非直接光照。结果比LPV精确，也可以做到光泽反射（glossy reflection）。</li></ul><img src="http://pic1.zhimg.com/a5bc6edfaf47c2b10999634f2e14ba70_b.jpg" data-rawwidth="1086" data-rawheight="333" class="origin_image zh-lightbox-thumb" width="1086" data-original="http://pic1.zhimg.com/a5bc6edfaf47c2b10999634f2e14ba70_r.jpg"><br><b>阴影</b><br><ul><li>Shadow Volume [12]：阴影体积是1977年发表的阴影技术，在屏幕空间光栅化阴影体积，可准确判断每个屏幕像素是否在阴影之内。可以处理平行光源和点光源的阴影。1991年[13]讲述如何用stencil buffer来实现此算法，适合在图形加速硬件（当时还没有所谓GPU）上使用。但很多人发现，如果摄像机在阴影体积内，就会出错。在1998至2000年有多人发现一种解决方法，需要把John Carmack在2000年的电邮[14]中提及这个想法，后来成为2004年《毁灭战士3（Doom 3）》引擎的重要特徵，因他把这项技术发扬光大，即使他非首个发明人，此项技术通常被称为Carmack's Reverse。</li></ul><img src="http://pic4.zhimg.com/2324c8e3c0aefec2d7cab905488155f3_b.jpg" data-rawwidth="461" data-rawheight="346" class="origin_image zh-lightbox-thumb" width="461" data-original="http://pic4.zhimg.com/2324c8e3c0aefec2d7cab905488155f3_r.jpg"><br><br><ul><li>Parallel Split Shadow Map (PSSM) [15][16] / Cascaded Shadow Map（CSM）[17]：虽然Shadow Volume很吸引，但它需要大量的内存频宽，而且通常不能实现软阴影。后来大部分游戏改为使用Shadow Map（阴影贴图），这更适合GPU，并且可以通过多次采样（Percentage Closer Filtering, PCF）来实现软阴影。然而，阴影贴图也有许多问题，例如远近景物都采用同一张纹理，就会令到近景的精度不足，出现锯齿。2006年香港中文大学的博士生Fan Zhang等人发表了一种 PSSM 算法 [15]，为不同距离的场景渲染多张阴影贴图，在采样的时候按距离决定使用那一张。这个方法的变种CSM，在切割上和PSSM有点差异，被广泛使用于现时大部分游戏引擎中。</li></ul><img src="http://pic2.zhimg.com/dba24fba68e2ff8eb5a5ab819c50a1a5_b.jpg" data-rawwidth="511" data-rawheight="327" class="origin_image zh-lightbox-thumb" width="511" data-original="http://pic2.zhimg.com/dba24fba68e2ff8eb5a5ab819c50a1a5_r.jpg"><br><ul><li>Variance Shadow Map（VSM）[18]：之前谈到用PCF做软阴影，它的坏处就是要做多次采样。那么可否把阴影贴图直接模糊化来实现软阴影？答案是否定的。但是在2006年有学者发表了VSM，它是一种用统计方式来逼近软阴影的效果。 <a href="http://www.zhihu.com/question/26556440/answer/33217823" class="internal">如何推导方差阴影贴图（variance shadow map, VSM) ? - Milo Yip 的回答</a></li></ul><img src="http://pic2.zhimg.com/6b9301a98593b2fb0efc1d8042000c75_b.jpg" data-rawwidth="856" data-rawheight="300" class="origin_image zh-lightbox-thumb" width="856" data-original="http://pic2.zhimg.com/6b9301a98593b2fb0efc1d8042000c75_r.jpg"><br><b>场景管理</b><br><ul><li><a href="http://en.wikipedia.org/wiki/Binary_space_partitioning" class=" wrap external" target="_blank" rel="nofollow noreferrer">Binary Space Partitioning<i class="icon-external"></i></a> （BSP）<br></li><li><a href="http://en.wikipedia.org/wiki/Portal_rendering" class=" wrap external" target="_blank" rel="nofollow noreferrer">Portal rendering<i class="icon-external"></i></a><br></li><li><a href="http://en.wikipedia.org/wiki/Quadtree" class=" wrap external" target="_blank" rel="nofollow noreferrer">Quadtree<i class="icon-external"></i></a>、<a href="http://en.wikipedia.org/wiki/Octree" class=" wrap external" target="_blank" rel="nofollow noreferrer">Octree<i class="icon-external"></i></a>：<a href="http://www.zhihu.com/question/25111128/answer/30129131?group_id=536873118954696704" class="internal">游戏场景管理的八叉树算法是怎样的？ - Milo Yip 的回答</a></li><li>Potential Visibility Set （PVS）</li><li>Occlusion Culling by Software Rasterization</li></ul><br><b>动画／物理</b><br><ul><li>Particle System</li><li>Smoothed Particle Hydrodynamics（SPH）</li><li>Curl Noise</li><li>Dual Quaternion Skinning</li></ul><br><b>碰撞测试</b><br><ul><li><a href="http://en.wikipedia.org/wiki/Hyperplane_separation_theorem" class=" wrap external" target="_blank" rel="nofollow noreferrer">Hyperplane separation theorem<i class="icon-external"></i></a> （或称separating axis theorem/SAT）：凸形状相交测试的基本原理。在<a href="http://www.zhihu.com/question/24251545/answer/27184960" class="internal">怎样判断平面上一个矩形和一个圆形是否有重叠？ - Milo Yip 的回答</a>中，其实背后也是使用了SAT。<br></li><li><a href="http://en.wikipedia.org/wiki/Gilbert%E2%80%93Johnson%E2%80%93Keerthi_distance_algorithm" class=" wrap external" target="_blank" rel="nofollow noreferrer">Gilbert-Johnson-Keerthi distance algorithm<i class="icon-external"></i></a> (GJK距离算法)：计算两个凸形状的距离（可用于相交测试）<br></li><li><a href="http://en.wikipedia.org/wiki/Sweep_and_prune" class=" wrap external" target="_blank" rel="nofollow noreferrer">Sweep and prune<i class="icon-external"></i></a>：用于broad phase碰撞检测，找出物体AABB是否相交。对于时空上连续的物体运动，算法最坏O(n^2)、最好O(n)。<br></li></ul><br><b>人工智能</b><br><ul><li><a href="http://en.wikipedia.org/wiki/Minimax" class=" wrap external" target="_blank" rel="nofollow noreferrer">Minimax<i class="icon-external"></i></a></li><li><a href="http://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning" class=" wrap external" target="_blank" rel="nofollow noreferrer">Alpha-Beta Pruning<i class="icon-external"></i></a><br></li><li>A* path finding</li><li><a href="http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" class=" wrap external" target="_blank" rel="nofollow noreferrer">Dijkstra's algorithm<i class="icon-external"></i></a><br></li><li><a href="http://en.wikipedia.org/wiki/Finite-state_machine" class=" wrap external" target="_blank" rel="nofollow noreferrer">Finite-state machine<i class="icon-external"></i></a><br></li><li>Behavior Tree</li></ul><br>（中午吃饭时间写不完，后补）<br><br><b>参考</b><br><br>[1] Bresenham, Jack E. "Algorithm for computer control of a digital plotter." <i>IBM Systems journal</i> 4.1 (1965): 25-30. <a href="http://www.cse.iitb.ac.in/~paragc/teaching/2011/cs475/papers/bresenham_line.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">cse.iitb.ac.in/~paragc/</span><span class="invisible">teaching/2011/cs475/papers/bresenham_line.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[2] Bresenham, Jack. "A linear algorithm for incremental digital display of circular arcs." <i>Communications of the ACM</i> 20.2 (1977): 100-106. <a href="http://www.cse.iitb.ac.in/~paragc/teaching/2014/cs475/papers/bresenham_circle.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">cse.iitb.ac.in/~paragc/</span><span class="invisible">teaching/2014/cs475/papers/bresenham_circle.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[3] Catmull, Ed, and Alvy Ray Smith. "3-D transformations of images in scanline order." <i>ACM SIGGRAPH Computer Graphics</i>. Vol. 14. No. 3. ACM, 1980. <a href="http://alvyray.com/Papers/CG/2pass80.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">alvyray.com/Papers/CG/2</span><span class="invisible">pass80.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[4] Pineda, Juan. "A parallel algorithm for polygon rasterization." <i>ACM SIGGRAPH Computer Graphics</i>. Vol. 22. No. 4. ACM, 1988. <a href="http://people.csail.mit.edu/ericchan/bib/pdf/p17-pineda.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">people.csail.mit.edu/er</span><span class="invisible">icchan/bib/pdf/p17-pineda.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[5] Sloan, Peter-Pike, Jan Kautz, and John Snyder. "Precomputed radiance transfer for real-time rendering in dynamic, low-frequency lighting environments." <i>ACM Transactions on Graphics (TOG)</i>. Vol. 21. No. 3. ACM, 2002. <a href="http://www1.cs.columbia.edu/~ravir/6998/papers/p527-sloan.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">www1.cs.columbia.edu/~r</span><span class="invisible">avir/6998/papers/p527-sloan.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[6] Chen, Hao, and Xinguo Liu. "Lighting and material of Halo 3." <i>ACM SIGGRAPH 2008 Games</i>. ACM, 2008. <a href="http://developer.amd.com/wordpress/media/2012/10/S2008-Chen-Lighting_and_Material_of_Halo3.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">developer.amd.com/wordp</span><span class="invisible">ress/media/2012/10/S2008-Chen-Lighting_and_Material_of_Halo3.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[7] Mittring, Martin. "Finding next gen: Cryengine 2." <i>ACM SIGGRAPH 2007 courses</i>. ACM, 2007. <a href="http://developer.amd.com/wordpress/media/2012/10/Chapter8-Mittring-Finding_NextGen_CryEngine2.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">developer.amd.com/wordp</span><span class="invisible">ress/media/2012/10/Chapter8-Mittring-Finding_NextGen_CryEngine2.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[8] Ritschel, Tobias, Thorsten Grosch, and Hans-Peter Seidel. "Approximating dynamic global illumination in image space." <i>Proceedings of the 2009 symposium on Interactive 3D graphics and games</i>. ACM, 2009. <a href="https://people.mpi-inf.mpg.de/~ritschel/Papers/SSDO.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">people.mpi-inf.mpg.de/~</span><span class="invisible">ritschel/Papers/SSDO.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[9] Kaplanyan, Anton. "Light propagation volumes in cryengine 3." <i>ACM SIGGRAPH Courses</i> 7 (2009): 2. <a href="http://www.crytek.com/download/Light_Propagation_Volumes.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">crytek.com/download/Lig</span><span class="invisible">ht_Propagation_Volumes.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[10] Kaplanyan, Anton, and Carsten Dachsbacher. "Cascaded light propagation volumes for real-time indirect illumination." <i>Proceedings of the 2010 ACM SIGGRAPH symposium on Interactive 3D Graphics and Games</i>. ACM, 2010. <a href="http://www.vis.uni-stuttgart.de/~dachsbcn/download/lpv.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">vis.uni-stuttgart.de/~d</span><span class="invisible">achsbcn/download/lpv.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[11] Crassin, Cyril, et al. "Interactive indirect illumination using voxel cone tracing."<i>Computer Graphics Forum</i>. Vol. 30. No. 7. Blackwell Publishing Ltd, 2011. <a href="https://research.nvidia.com/sites/default/files/publications/GIVoxels-pg2011-authors.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">research.nvidia.com/sit</span><span class="invisible">es/default/files/publications/GIVoxels-pg2011-authors.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[12] Crow, Franklin C. "Shadow algorithms for computer graphics." <i>ACM SIGGRAPH Computer Graphics</i>. Vol. 11. No. 2. ACM, 1977. <a href="http://excelsior.biosci.ohio-state.edu/~carlson/history/PDFs/crow-shadows.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">excelsior.biosci.ohio-state.edu</span><span class="invisible">/~carlson/history/PDFs/crow-shadows.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[13] Heidmann, Tim. "Real shadows, real time." <i>Iris Universe</i> 18 (1991): 28-31.<br>[14] Carmack, John, "e-mail to Mark Kilgard on Shadow Volume", 23 May 2000. <a href="http://web.archive.org/web/20090127020935/http://developer.nvidia.com/attach/6832" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://</span><span class="visible">web.archive.org/web/200</span><span class="invisible">90127020935/http://developer.nvidia.com/attach/6832</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[15] Zhang, Fan, et al. "Parallel-split shadow maps for large-scale virtual environments." <i>Proceedings of the 2006 ACM international conference on Virtual reality continuum and its applications</i>. ACM, 2006.<br>[16] Zhang, Fan, Hanqiu Sun, and Oskari Nyman. "Parallel-split shadow maps on programmable gpus." <i>GPU Gems</i> 3 (2007): 203-237. <a href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch10.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">GPU Gems 3 - Chapter 10. Parallel-Split Shadow Maps on Programmable GPUs<i class="icon-external"></i></a><br>[17] Dimitrov, Rouslan. "Cascaded shadow maps." <i>Developer Documentation, NVIDIA Corp</i> (2007). <a href="http://www.cse.chalmers.se/edu/year/2011/course/TDA361/Advanced%20Computer%20Graphics/cascaded_shadow_maps.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">cse.chalmers.se/edu/yea</span><span class="invisible">r/2011/course/TDA361/Advanced%20Computer%20Graphics/cascaded_shadow_maps.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a><br>[18] Donnelly, William, and Andrew Lauritzen. "Variance shadow maps."<i>Proceedings of the 2006 symposium on Interactive 3D graphics and games</i>. ACM, 2006. <a href="http://www.punkuser.net/vsm/vsm_paper.pdf" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">http://www.</span><span class="visible">punkuser.net/vsm/vsm_pa</span><span class="invisible">per.pdf</span><span class="ellipsis"></span><i class="icon-external"></i></a>



编辑于 2015-01-09



---
原问链接: [http://www.zhihu.com/question/27455969](http://www.zhihu.com/question/27455969)